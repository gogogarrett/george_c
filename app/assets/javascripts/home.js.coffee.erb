Process =
  currentProcess: 0,
  maxProcesses: $('.process').size() - 1,

  init: ->
    $('i').hide()
    $('i').first().show()
    $('.process').hide()
    $('.process:eq(' + Process.currentProcess + ')').show()
    $('a#left').on 'click', @go_prev
    $('a#right').on 'click', @go_next
    $('a.step').on 'click', @gotostep

  go_prev: (e) ->
    e.preventDefault()
    if Process.currentProcess == 0
      Process.currentProcess = $(".process").size() - 1
    else
      Process.currentProcess--
    Process.show_process()

  go_next: (e) ->
    e.preventDefault()
    if Process.currentProcess == Process.maxProcesses
      Process.currentProcess = 0
    else
      Process.currentProcess++
    Process.show_process()

  show_process: ->
    $('.process').hide()
    $('.process:eq(' + Process.currentProcess + ')').fadeIn()
    $('i').hide()
    $("a[data-step-id='" + Process.currentProcess + "']").prev('i').show()

  gotostep: (e) ->
    e.preventDefault()
    Process.currentProcess = $(this).data('step-id')
    Process.show_process()





Galleries =
  currentImage: 0,
  maxImage: 0,

  init: ->
    $('ul.gallery').hide()
    $gallery = $('ul.gallery').first()
    $gallery.show()
    Galleries.currentImage = 0
    Galleries.maxImage = $gallery.find('.image').length
    $('a.gallery_title').on 'click', @show_current_gallery
    @slideImages($gallery)

  slideImages: (gallery) ->
    Galleries.myInterval = setInterval ->
      $('.image').fadeOut('fast')

      if Galleries.currentImage < Galleries.maxImage
        gallery.find('.image:eq(' + Galleries.currentImage + ')').fadeIn('slow')
        Galleries.currentImage++
      else
        Galleries.currentImage = 0
        gallery.find('.image:eq(' + Galleries.currentImage + ')').fadeIn('slow')
    , 2900

  show_current_gallery: (e) ->
    e.preventDefault()
    title = $(this).data('title');

    $('ul.gallery').hide()
    $gallery = $('ul.'+title).show()
    $('.image').hide()
    $gallery.find('.image').first().show()

    window.clearInterval(Galleries.myInterval);
    Galleries.currentImage = 0
    Galleries.maxImage = $gallery.find('.image').length
    Galleries.showArrow($gallery)
    Galleries.slideImages($gallery)

  showArrow: (gallery) ->
    $('i.arrow').hide()
    $('a[data-title="' + gallery.data('title') + '"]').prev('i.arrow').show()


GeorgeC =

  init: ->
    $('a.about').on 'click', @about_page
    $('a.processes').on 'click', @processes_page
    $('a.awards').on 'click', @awards_page
    $('a.galleries').on 'click', @galleries_page
    $('a.inventories').on 'click', @inventories_page
    $('a.contact').on 'click', @contact_page

  about_page: (e) ->
    $("section#page").removeClass()
    $("section#page").addClass 'about'
    $("nav li").removeClass()
    $("nav li[data-menu-title='about']").addClass 'about_link'
    $("nav li[data-menu-title='about']").addClass 'selected'

  processes_page: (e) ->
    $("section#page").removeClass()
    $("section#page").addClass 'processes'
    $("nav li").removeClass()
    $("nav li[data-menu-title='processes']").addClass 'processes_link'
    $("nav li[data-menu-title='processes']").addClass 'selected'

  awards_page: (e) ->
    $("section#page").removeClass()
    $("section#page").addClass 'awards'
    $("nav li").removeClass()
    $("nav li[data-menu-title='awards']").addClass 'awards_link'
    $("nav li[data-menu-title='awards']").addClass 'selected'

  galleries_page: (e) ->
    $("section#page").removeClass()
    $("section#page").addClass 'galleries'
    $("nav li").removeClass()
    $("nav li[data-menu-title='galleries']").addClass 'galleries_link'
    $("nav li[data-menu-title='galleries']").addClass 'selected'

  inventories_page: (e) ->
    $("section#page").removeClass()
    $("section#page").addClass 'inventories'
    $("nav li").removeClass()
    $("nav li[data-menu-title='inventories']").addClass 'inventories_link'
    $("nav li[data-menu-title='inventories']").addClass 'selected'

  contact_page: (e) ->
    $("section#page").removeClass()
    $("section#page").addClass 'contact'
    $("nav li").removeClass()
    $("nav li[data-menu-title='contact']").addClass 'contact_link'
    $("nav li[data-menu-title='contact']").addClass 'selected'

$ ->
  GeorgeC.init()

  if window.location.pathname == "/galleries"
    Galleries.init()
  if window.location.pathname == "/processes"
    Process.init()

  # $('#page').on 'pjax:success', ->
  #   GeorgeC.init()

  #   if window.location.pathname == "/galleries"
  #     Galleries.init()
  #   if window.location.pathname == "/processes"
  #     Process.init()
